{% extends "cases/base.html" %}
{% load bootstrap %}
{% load datepicker_html %}
{% load build_prefix %}

{% block content %}
    <form role="form" action="{% url 'create-incident' %}" method="post">
        {{ form.media }}
        {% csrf_token %}
        <h3>Incident Information</h3>
            <!-- {{ incident_form|bootstrap }} -->
            {% for field in incident_form %}
                <div class="fieldWrapper">
                    {{ field.errors }}
                    {{ field.label_tag }}
                    {% if "datetime" in field.name %}
                        {% autoescape off %}{{ field|datepicker_html }}{% endautoescape %}
                    {% else %}
                        {{ field }}
                    {% endif %}
                </div>
            {% endfor %}
        <h3>Victim(s)</h3>
                {{ victim_form.media }}
                <!-- {{ victim_form|bootstrap }} -->
            <table>
                {% with prefix="victims"|build_prefix:"0" %}
                    <!-- {{ victim_form|bootstrap }} -->
                    {% for field in victim_form %}
                        <div class="fieldWrapper">
                            {{ field.errors }}
                            {{ field.label_tag }}
                            {% if "date_of_birth" in field.name %}
                                {% autoescape off %}
                                {{ field|datepicker_html:prefix }}
                                {% endautoescape %}
                            {% else %}
                                {{ field }}
                            {% endif %}
                        </div>
                    {% endfor %}
                {% endwith %}
            </table>
        <h3>Suspect(s)</h3>
            <h4>Suspect {{ forloop.counter }}</h4>
            {% with prefix="suspects"|build_prefix:"0" %}
                <!-- {{ suspect_form|bootstrap }} -->
                {% for field in suspect_form %}
                    <div class="fieldWrapper">
                        {{ field.errors }}
                        {{ field.label_tag }}
                        {% if "date_of_birth" in field.name %}
                            {% autoescape off %}
                            {{ field|datepicker_html:prefix }}
                            {% endautoescape %}
                        {% else %}
                            {{ field }}
                        {% endif %}
                    </div>
                {% endfor %}
            {% endwith %}
        <div class="form-group">
            <button type="submit" class="btn btn-primary">Create</button>
        </div>
    </form>

{% endblock %}

